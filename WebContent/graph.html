<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
    <title>easyLPS</title>
    <link rel="stylesheet" type="text/css" href="js/joint.css" />
    <link rel="stylesheet" type="text/css" href="menu.css" />
</head>
<body>
    <!-- content -->
    <ul>
    	<li><input type="button" onclick="initialize()" value="Initialization"></li>
    	<li><input type="button" onclick="reactiveRule()" value="ReactiveRule"></li>
    	<li><input type="button" onclick="macroAction()" value="MacroAction"></li>
    	<li><input type="button" onclick="save()" value="Save"></li>
    	<li><input type="button" onclick="saveAs()" value="SaveAs"></li>
	</ul>
	<ul>
    	<li><input type="button" onclick="newAction()" value="New Action"></li>
    	<li><input type="button" onclick="newFluent()" value="New Fluent"></li>
    	<li><input type="button" onclick="removeElement()" value="Remove"></li>
    	<li><input type="button" onclick="insertText()" value="Insert Text"></li>
    	<li><input type="button" onclick="setAsConclusion()" value="Set As Conclusion"></li>
	</ul>
	<input type="text" id="myText" value="Undefined" onkeyup="inputRestrict(this)">

	<ul>
    	<li><input type="button" onclick="jsonStr()" value="Json String"></li>
    	<li><input type="button" onclick="getClause()" value="Get Clause"></li>
  		<li><input type="button" onclick="selectGraph()" value="Select Graph"></li>
    	<li><input type="button" onclick="alert('b')" value="Insert Text"></li>
	</ul>
	<p id="mode" ></p>
	<ul id="storedGraph">
		<li><input type="button" id="getCode" onclick="getFinalCode()" value="Process to Final Code" style="display:none"></li>
		<li><input type="button" id="hideSelect" onclick="hideSelect()" value="Hide" style="display:none"></li>
	</ul>
	
    <div id="myholder"></div>
    

    <!-- dependencies -->
    <script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/lodash.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/backbone.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/joint.js" type="text/javascript" charset="utf-8"></script>
	<script src="graphModel.js" type="text/javascript" charset="utf-8"></script>

    <!-- code -->
    <script type="text/javascript">
    	var global = {
    			graph: null,
    			graphType: null,
    			currentGraphButton: null,
    			mode: 'normal'
    	}
    	
    	function getClause() {
    		if(global.currentGraphButton == null) {
    			alert("Please save the graph first!");
    			return;
    		}
    		$.ajax({
    				url : "ClauseServlet",
    				type : "post",
    				data : {
    					"jsonStr": toJson(), 
    					"graphType": global.graphType,
    					"graphName": global.currentGraphButton.getAttribute("graphname")
    				},
    				error : function(XMLHttpRequest, textStatus, errorThrown){ 
    					alert(XMLHttpRequest.responseText);
    				},
    				success : function(data) {
    					parent.frames["code"].document.getElementById('output').value = data;
    				}
    		});
    	}
    	
    	function inputRestrict(obj) {
    		var regex = obj.value.replace(/[^\a-\z\A-\Z0-9\(\)\,\_\ ]/g,'');
    		if(obj.value != regex) {
    			obj.value = regex;
    		}
    	}
    </script>
    
</body>
</html>